(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return l});var r=n(45),o=!!e.env.DEBUG_API,c=Object(r.a)({version:"/v0",config:{databaseURL:"https://hacker-news.firebaseio.com"}});function i(e){o&&console.log("fetching ".concat(e,"..."));var t=c.cachedItems;return t&&t.has(e)?(o&&console.log("cache hit for ".concat(e,".")),Promise.resolve(t.get(e))):new Promise(function(n,r){c.child(e).once("value",function(r){var c=r.val();c&&(c.__lastUpdated=Date.now()),t&&t.set(e,c),o&&console.log("fetched ".concat(e,".")),n(c)},r)})}function u(e){return c.cachedIds&&c.cachedIds[e]?Promise.resolve(c.cachedIds[e]):i("".concat(e,"stories"))}function a(e){return Promise.all(e.map(function(e){return function(e){return i("item/".concat(e))}(e)}))}function f(e){return i("user/".concat(e))}function l(e,t){var n=!0,r=c.child("".concat(e,"stories")),o=function(e){n?n=!1:t(e.val())};return r.on("value",o),function(){r.off("value",o)}}c.onServer&&function e(){a((c.cachedIds.top||[]).slice(0,30));setTimeout(e,9e5)}()}).call(this,n(33))},22:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"loading",function(){return h}),n.d(r,"activeType",function(){return m}),n.d(r,"itemsPerPage",function(){return y}),n.d(r,"items",function(){return v}),n.d(r,"users",function(){return g}),n.d(r,"lists",function(){return w});var o=n(5),c=n(13),i=n(10),u=n(44),a="SET_LOADING",f="SET_ACTIVE_TYPE",l="SET_LIST",s="SET_ITEMS",p="SET_USER";function d(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return t.loading;default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.activeType;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return d({},e,{},t.items.reduce(function(e,t){return t&&(e[t.id]=t),e},{}));default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return d({},e,b({},t.id,t.user||!1));default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{top:[],new:[],show:[],ask:[],job:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return d({},e,b({},t.listType,t.ids));default:return e}},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.activeType,r=e.itemsPerPage,o=e.lists;if(!n)return[];var c=(t-1)*r,i=t*r;return o[n].slice(c,i)},j=function(e,t){return O(e,t).map(function(t){return e.items[t]}).filter(function(e){return e})},_=n(20),E=function(e){return{type:a,loading:e}},P=function(e,t){return{type:l,listType:e,ids:t}},T=function(e,t){return function(n){return n({type:f,activeType:e}),Object(_.a)(e).then(function(t){return n(P(e,t))}).then(function(){return n(k(t))})}},S=function(e){return function(t,n){var r=Date.now(),o=n();return(e=e.filter(function(e){var t=o.items[e];return!t||r-t.__lastUpdated>18e4})).length?Object(_.b)(e).then(function(e){return t(function(e){return{type:s,items:e}}(e))}):Promise.resolve()}},k=function(e){return function(t,n){return t(S(O(n(),e)))}},C=function(e){return function(t,n){return n().users[e]?Promise.resolve():Object(_.c)(e).then(function(n){return t(function(e,t){return{type:p,id:e,user:t}}(e,n))})}};function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"g",function(){return I}),n.d(t,"i",function(){return E}),n.d(t,"h",function(){return P}),n.d(t,"e",function(){return T}),n.d(t,"d",function(){return S}),n.d(t,"c",function(){return k}),n.d(t,"f",function(){return C}),n.d(t,"a",function(){return j});var I=Object(o.a)(),A=i.d;t.b=function(e){return Object(i.e)(Object(i.c)(function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){N(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({router:Object(c.connectRouter)(I)},r)),e,A(Object(i.a)(Object(c.routerMiddleware)(I),u.a)))}},30:function(e,t,n){"use strict";var r=n(17),o=n.n(r),c=n(1),i=n.n(c),u=n(16);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return"boolean"!=typeof t&&(n=t,t=!0),function(r){var c=function(t){function o(t,n){var r;return f(this,o),r=p(this,d(o).call(this,t,n)),e.__inject__&&e.__inject__(r.props.staticContext),r.setTitle(),r}return b(o,i.a.PureComponent),s(o,[{key:"setTitle",value:function(){var e="function"==typeof n?n.call(this,this):n;e&&Promise.resolve(e).then(function(e){e&&(document.title="React Hackernews | ".concat(e))})}},{key:"render",value:function(){return i.a.createElement(r,this.props)}}]),o}();return c.displayName="Ssr".concat(r.displayName||r.name||"Component"),o()(t?Object(u.a)(c):c,r)}};function y(e){var t=e.replace(/^https?:\/\//,"").replace(/\/.*$/,"").split(".").slice(-3);return"www"===t[0]&&t.shift(),t.join(".")}function v(e){var t=Date.now()/1e3-Number(e);return t<3600?g(~~(t/60)," minute"):t<86400?g(~~(t/3600)," hour"):g(~~(t/86400)," day")}function g(e,t){return 1===e?e+t:e+t+"s"}n.d(t,"a",function(){return y}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return w}),n.d(t,"d",function(){return m});var w={}},45:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(28),o=n.n(r);n(66);function c(e){var t=e.config,n=e.version;return o.a.initializeApp(t),o.a.database().ref(n)}},48:function(e,t,n){e.exports=n(76)},68:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r,o=n(1),c=n.n(o),i=n(18),u=n(41),a=n.n(u),f=n(15),l=n(21),s=n(13),p=n(22),d=n(81),b=n(32),h=n(47),m=n(80),y=n(82),v=n(26),g=n(30);n(68);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),e}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){return Object(i.asyncComponent)({resolve:e})},C=function(e){return k(function(){return n.e(3).then(n.bind(null,101)).then(function(t){return t.default(e)})})},N=[{path:"/",exact:!0,component:function(){return c.a.createElement(b.a,{to:"/top"})}},{path:"/top/:page(\\d+)?",component:C("top")},{path:"/new/:page(\\d+)?",component:C("new")},{path:"/show/:page(\\d+)?",component:C("show")},{path:"/ask/:page(\\d+)?",component:C("ask")},{path:"/job/:page(\\d+)?",component:C("job")},{path:"/item/:id(\\d+)",component:k(function(){return n.e(4).then(n.bind(null,102))})},{path:"/user/:id",component:k(function(){return n.e(5).then(n.bind(null,100))})},{path:"*",component:function(e){function t(e,n){var r;return O(this,t),(r=E(this,P(t).call(this,e,n))).props.staticContext&&(r.props.staticContext.code=404),r}return T(t,c.a.PureComponent),_(t,[{key:"render",value:function(){return"Custom 404 Page, will you implement it?"}}]),t}()}],I={entering:{opacity:0},entered:{opacity:1}},A=Object(m.a)(r=function(e){function t(){return O(this,t),E(this,P(t).apply(this,arguments))}return T(t,c.a.PureComponent),_(t,[{key:"componentDidMount",value:function(){g.b.appMounted=!0}},{key:"render",value:function(){var e=this.props.location;return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header-content"},c.a.createElement(y.a,{to:"/",exact:!0},c.a.createElement("img",{className:"logo",src:"/public/logo.svg",alt:"React Logo"})),c.a.createElement("nav",{className:"inner"},["top","new","show","ask","job"].map(function(e){return c.a.createElement(y.a,{key:e,to:"/".concat(e)},Object(d.a)(e))})),c.a.createElement("a",{className:"github",href:"https://github.com/JounQin/react-hackernews",target:"_blank",rel:"noopener noreferrer"},"Built with React.js",c.a.createElement("img",{src:"/public/external.svg"})))),c.a.createElement(v.TransitionGroup,{component:o.Fragment},c.a.createElement(v.Transition,{timeout:200,key:e.pathname.split("/")[1],mountOnEnter:!0,unmountOnExit:!0},function(t){return c.a.createElement("div",{className:"view",style:I[t]},Object(h.a)(N,null,{location:e}))})))}}]),t}())||r,x=Object(p.b)(window.__INITIAL_STATE__),D=window.ASYNC_COMPONENTS_STATE;delete window.__INITIAL_STATE__,delete window.ASYNC_COMPONENTS_STATE;var R;R=c.a.createElement(i.AsyncComponentProvider,{rehydrateState:D},c.a.createElement(l.Provider,{store:x},c.a.createElement(s.ConnectedRouter,{history:p.g},c.a.createElement(A,null)))),a()(R).then(function(){return Object(f.hydrate)(R,document.getElementById("app"))}),("https:"===location.protocol||["127.0.0.1","localhost"].includes(location.hostname))&&navigator.serviceWorker&&navigator.serviceWorker.register("/service-worker.js")}},[[48,1,2]]]);